<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>èª¿é…’çŸ¥è­˜æ¸¬é©— ï½œ Cocktail Quiz</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Josefin+Sans:wght@300;400;500;600&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#0a0a0f;--bg2:#12121a;--bg3:#1a1a25;--gold:#d4af37;--gold-l:#f4e4ba;--gold-d:#a67c00;--cream:#f5f0e6;--muted:#9e9a92;--ok:#5cb85c;--ok-bg:rgba(92,184,92,.1);--no:#e54b4b;--no-bg:rgba(229,75,75,.1);--rose:#c77d8e;--mint:#7dc7a0}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Josefin Sans','Noto Sans TC',sans-serif;background:var(--bg);color:var(--cream);min-height:100vh}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse at 20% 20%,rgba(212,175,55,.03),transparent 50%),radial-gradient(ellipse at 80% 80%,rgba(199,125,142,.03),transparent 50%);pointer-events:none;z-index:0}

.screen{display:none;position:relative;z-index:1}.screen.active{display:block}
.flex-screen{display:none;position:relative;z-index:1;min-height:100vh;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}
.flex-screen.active{display:flex}

.back-link{position:fixed;top:18px;left:20px;z-index:60;display:flex;align-items:center;gap:6px;color:var(--muted);text-decoration:none;font-size:.82rem;letter-spacing:.05em;padding:7px 14px;border:1px solid rgba(212,175,55,.15);background:rgba(10,10,15,.85);backdrop-filter:blur(8px);transition:.3s}
.back-link:hover{color:var(--gold-l);border-color:var(--gold);box-shadow:0 3px 15px rgba(212,175,55,.15)}
.deco{display:flex;align-items:center;justify-content:center;gap:18px;margin-bottom:25px}
.deco::before,.deco::after{content:'';width:100px;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent)}
.deco-d{width:10px;height:10px;background:var(--gold);transform:rotate(45deg);position:relative}
.deco-d::before{content:'';position:absolute;inset:3px;background:var(--bg)}
h1.title{font-family:'Cormorant Garamond','Noto Sans TC',serif;font-size:clamp(2rem,5vw,3.5rem);font-weight:700;color:var(--gold-l);text-shadow:0 0 40px rgba(212,175,55,.3);letter-spacing:.08em;margin-bottom:6px}
.subtitle{font-size:.85rem;color:var(--muted);letter-spacing:.3em;text-transform:uppercase}

.modes{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;max-width:850px;width:100%;margin:40px 0 35px}
.mode{background:var(--bg2);border:1px solid rgba(212,175,55,.12);padding:28px 22px;cursor:pointer;transition:.35s;position:relative}
.mode:hover{border-color:var(--gold);box-shadow:0 6px 28px rgba(212,175,55,.12);transform:translateY(-2px)}
.mode.sel{border-color:var(--gold);background:rgba(212,175,55,.07)}
.mode.sel::after{content:'âœ“';position:absolute;top:10px;right:14px;color:var(--gold);font-size:1.1rem}
.mode-ico{font-size:2.2rem;margin-bottom:12px}
.mode-t{font-family:'Cormorant Garamond','Noto Sans TC',serif;font-size:1.3rem;color:var(--gold-l);font-weight:600;margin-bottom:6px}
.mode-d{font-size:.82rem;color:var(--muted);line-height:1.6}
.mode-n{font-size:.78rem;color:var(--gold);margin-top:8px;font-weight:500}
.go{background:linear-gradient(135deg,var(--gold-d),var(--gold));border:none;color:var(--bg);font-family:inherit;font-size:1.05rem;font-weight:600;letter-spacing:.12em;padding:15px 48px;cursor:pointer;transition:.3s;text-transform:uppercase}
.go:hover{box-shadow:0 5px 25px rgba(212,175,55,.4);transform:translateY(-2px)}
.go:disabled{opacity:.35;cursor:not-allowed;transform:none;box-shadow:none}

.qh{position:sticky;top:0;z-index:50;background:rgba(10,10,15,.95);backdrop-filter:blur(10px);border-bottom:1px solid rgba(212,175,55,.12);padding:14px 22px;display:flex;align-items:center;gap:18px}
.qh-prog{flex:1}
.qh-top{font-size:.78rem;color:var(--muted);margin-bottom:5px;display:flex;justify-content:space-between}
.bar{height:4px;background:rgba(212,175,55,.12);overflow:hidden}.bar-fill{height:100%;background:linear-gradient(90deg,var(--gold-d),var(--gold));transition:width .4s}
.qh-sc{text-align:right;min-width:90px}
.qh-sc .num{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:700;color:var(--gold-l)}
.qh-sc .lbl{font-size:.68rem;color:var(--muted);letter-spacing:.1em}
.qh-q{background:0;border:1px solid rgba(212,175,55,.2);color:var(--muted);padding:7px 14px;font-size:.78rem;cursor:pointer;font-family:inherit;transition:.3s}
.qh-q:hover{border-color:var(--rose);color:var(--rose)}

.qa{max-width:720px;margin:35px auto;padding:0 22px 80px}
.q-cat{font-size:.72rem;color:var(--gold);letter-spacing:.2em;text-transform:uppercase;margin-bottom:8px}
.q-num{font-family:'Cormorant Garamond',serif;font-size:.95rem;color:var(--muted);margin-bottom:14px}
.q-txt{font-family:'Noto Sans TC','Josefin Sans',sans-serif;font-size:1.2rem;color:var(--cream);line-height:1.8;margin-bottom:32px}
.q-txt em{color:var(--gold-l);font-style:normal;font-weight:500}

.opts{display:flex;flex-direction:column;gap:10px}
.opt{background:var(--bg2);border:1px solid rgba(212,175,55,.1);padding:16px 20px;text-align:left;cursor:pointer;font-family:inherit;font-size:.95rem;color:var(--cream);transition:.3s;display:flex;align-items:center;gap:14px}
.opt:hover:not(:disabled):not(.ok):not(.no){border-color:rgba(212,175,55,.35);background:var(--bg3)}
.opt-l{width:28px;height:28px;border:1px solid rgba(212,175,55,.25);display:flex;align-items:center;justify-content:center;font-family:'Cormorant Garamond',serif;font-size:.88rem;color:var(--gold);flex-shrink:0;transition:.3s}
.opt-t{flex:1;line-height:1.5}
.opt.ok{border-color:var(--ok);background:var(--ok-bg)}.opt.ok .opt-l{border-color:var(--ok);background:var(--ok);color:#fff}
.opt.no{border-color:var(--no);background:var(--no-bg)}.opt.no .opt-l{border-color:var(--no);background:var(--no);color:#fff}
.opt:disabled{cursor:default}

.fb{margin-top:22px;padding:16px 20px;border-left:3px solid;font-size:.88rem;line-height:1.7;opacity:0;transform:translateY(8px);transition:.4s}
.fb.show{opacity:1;transform:translateY(0)}
.fb.fb-ok{border-color:var(--ok);background:var(--ok-bg);color:var(--mint)}
.fb.fb-no{border-color:var(--no);background:var(--no-bg);color:var(--rose)}
.fb b{color:var(--gold-l);font-weight:500}

.nxt{margin-top:22px;background:linear-gradient(135deg,var(--gold-d),var(--gold));border:none;color:var(--bg);font-family:inherit;font-size:.95rem;font-weight:600;letter-spacing:.1em;padding:13px 36px;cursor:pointer;opacity:0;transform:translateY(8px);transition:.4s}
.nxt.show{opacity:1;transform:translateY(0)}.nxt:hover{box-shadow:0 5px 20px rgba(212,175,55,.3)}

.fill-area{margin-top:10px}
.fill-hint{font-size:.82rem;color:var(--muted);margin-bottom:8px}
.fill-row{display:flex;gap:10px;align-items:center}
.fill-input{flex:1;background:var(--bg2);border:1px solid rgba(212,175,55,.2);padding:14px 18px;font-family:inherit;font-size:1rem;color:var(--cream);outline:none;transition:.3s}
.fill-input:focus{border-color:var(--gold);box-shadow:0 0 15px rgba(212,175,55,.15)}
.fill-input:disabled{opacity:.6;cursor:not-allowed}
.fill-input.ok{border-color:var(--ok);background:var(--ok-bg)}
.fill-input.no{border-color:var(--no);background:var(--no-bg)}
.fill-submit{background:linear-gradient(135deg,var(--gold-d),var(--gold));border:none;color:var(--bg);font-family:inherit;font-size:.9rem;font-weight:600;padding:14px 24px;cursor:pointer;transition:.3s}
.fill-submit:hover{box-shadow:0 3px 15px rgba(212,175,55,.3)}
.fill-submit:disabled{opacity:.4;cursor:not-allowed}
.ing-list{list-style:none;margin:15px 0;padding:0}
.ing-list li{padding:8px 0;border-bottom:1px solid rgba(212,175,55,.08);color:var(--cream);font-size:.95rem}
.ing-list li:last-child{border-bottom:none}
.ing-list .blank{color:var(--gold);font-style:italic}

.timer{font-family:'Cormorant Garamond',serif;font-size:1.4rem;color:var(--gold-l);min-width:70px;text-align:center}

.r-score{margin:25px 0}
.r-big{font-family:'Cormorant Garamond',serif;font-size:clamp(3.5rem,8vw,6rem);font-weight:700;color:var(--gold-l);line-height:1}
.r-det{font-size:1.05rem;color:var(--muted);margin-top:8px}
.r-grade{font-family:'Cormorant Garamond','Noto Sans TC',serif;font-size:1.8rem;color:var(--gold);margin:12px 0 28px;font-weight:600}
.r-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;max-width:700px;width:100%;margin-bottom:35px}
.r-item{background:var(--bg2);border:1px solid rgba(212,175,55,.08);padding:18px}
.r-lbl{font-size:.78rem;color:var(--muted);margin-bottom:4px}
.r-val{font-family:'Cormorant Garamond',serif;font-size:1.6rem;color:var(--gold-l);font-weight:600}
.r-val small{font-size:.65rem;color:var(--muted)}
.r-acts{display:flex;gap:14px;flex-wrap:wrap;justify-content:center}
.r-btn{padding:13px 32px;font-family:inherit;font-size:.9rem;font-weight:500;letter-spacing:.1em;cursor:pointer;transition:.3s}
.r-btn.pri{background:linear-gradient(135deg,var(--gold-d),var(--gold));border:none;color:var(--bg)}
.r-btn.sec{background:0;border:1px solid rgba(212,175,55,.25);color:var(--gold-l)}
.r-btn:hover{transform:translateY(-2px);box-shadow:0 5px 20px rgba(212,175,55,.15)}

.wr{max-width:720px;width:100%;margin:28px auto 0;text-align:left;display:none}
.wr h3{font-family:'Cormorant Garamond','Noto Sans TC',serif;font-size:1.2rem;color:var(--gold-l);margin-bottom:14px;text-align:center}
.wi{background:var(--bg2);border:1px solid rgba(229,75,75,.12);padding:14px 18px;margin-bottom:8px}
.wi-q{font-size:.88rem;color:var(--cream);margin-bottom:5px;line-height:1.5}
.wi-y{font-size:.8rem;color:var(--rose)}.wi-c{font-size:.8rem;color:var(--mint);margin-top:2px}

@media(max-width:768px){.modes{grid-template-columns:1fr}.q-txt{font-size:1.05rem}.qh{padding:10px 14px;gap:10px}.timer{font-size:1.1rem}}
</style>
</head>
<body>
<a class="back-link" href="index.html">â† èª¿é…’é…æ–¹</a>

<!-- â•â•â• START â•â•â• -->
<div id="scr-start" class="flex-screen active">
<div class="deco"><div class="deco-d"></div></div>
<h1 class="title">èª¿é…’çŸ¥è­˜æ¸¬é©—</h1>
<p class="subtitle">Cocktail Knowledge Quiz &middot; 500 Questions</p>
<div class="modes" id="modes">
    <div class="mode" data-mode="50"><div class="mode-ico">ğŸ²</div><div class="mode-t">éš¨æ©Ÿç²¾é¸</div><div class="mode-d">å¾é¡Œåº«ä¸­éš¨æ©ŸæŠ½å– 50 é¡Œå¿«é€Ÿæ¸¬é©—</div><div class="mode-n">50 é¡Œ</div></div>
    <div class="mode" data-mode="100"><div class="mode-ico">ğŸ¯</div><div class="mode-t">ç™¾é¡ŒæŒ‘æˆ°</div><div class="mode-d">éš¨æ©Ÿ 100 é¡Œï¼Œå…¼å…·æ·±åº¦èˆ‡æ•ˆç‡</div><div class="mode-n">100 é¡Œ</div></div>
    <div class="mode" data-mode="500"><div class="mode-ico">ğŸ“‹</div><div class="mode-t">å®Œæ•´æ¸¬é©—</div><div class="mode-d">æŒ‘æˆ°å…¨éƒ¨ 500 é¡Œï¼Œå®Œæ•´æ¸¬è©¦èª¿é…’çŸ¥è­˜</div><div class="mode-n">500 é¡Œ</div></div>
</div>
<button class="go" id="go-btn" disabled>é¸æ“‡æ¨¡å¼é–‹å§‹æ¸¬é©—</button>
</div>

<!-- â•â•â• QUIZ â•â•â• -->
<div id="scr-quiz" class="screen">
<div class="qh">
    <div class="qh-prog"><div class="qh-top"><span id="p-lbl"></span><span id="p-pct"></span></div><div class="bar"><div class="bar-fill" id="p-bar"></div></div></div>
    <div class="timer" id="timer">00:00</div>
    <div class="qh-sc"><div class="num" id="sc-live">0</div><div class="lbl">æ­£ç¢º</div></div>
    <button class="qh-q" id="quit-btn">çµæŸ</button>
</div>
<div class="qa" id="qa"></div>
</div>

<!-- â•â•â• RESULT â•â•â• -->
<div id="scr-result" class="flex-screen">
<div class="deco"><div class="deco-d"></div></div>
<h1 class="title">æ¸¬é©—çµæœ</h1>
<div class="r-score"><div class="r-big" id="r-pct"></div><div class="r-det" id="r-det"></div></div>
<div class="r-grade" id="r-grade"></div>
<div id="r-time" style="color:var(--muted);margin-bottom:20px;font-size:.9rem"></div>
<div class="r-grid" id="r-grid"></div>
<div class="r-acts">
    <button class="r-btn pri" id="r-retry">é‡æ–°æ¸¬é©—</button>
    <button class="r-btn sec" id="r-review">æŸ¥çœ‹éŒ¯é¡Œ</button>
</div>
<div class="wr" id="wr"></div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const C=[
{id:1,en:"Golden Shine",zh:"é‡‘è‰²é–ƒè€€",cat:"before-dinner",catZh:"é¤å‰é…’",m:"stir",gZh:"é›å°¾é…’æ¯",
 ing:[{zh:"å“ˆç“¦é‚£3å¹´è˜­å§†é…’",en:"Rum (Havana 3 yrs)",a:"50 æ¯«å‡"},{zh:"å¹²é‚‘æ©™çš®ç”œé…’",en:"Dry Orange Liqueur",a:"10 æ¯«å‡"},{zh:"æŸ‘æ›¼æ€¡é¦™æ©™ç”œé…’",en:"Grand Marnier",a:"5 æ¯«å‡"},{zh:"ç”œé¦™è‰¾é…’",en:"Sweet Vermouth",a:"5 æ¯«å‡"}],ga:"æ©™çš®æ²"},
{id:2,en:"Old Fashioned",zh:"è€å¼é›å°¾é…’",cat:"before-dinner",catZh:"é¤å‰é…’",m:"muddle",gZh:"å¤å…¸æ¯",
 ing:[{zh:"æ³¢æœ¬å¨å£«å¿Œ",en:"Bourbon Whiskey",a:"45 æ¯«å‡"},{zh:"å®‰æ ¼å¼è‹¦ç²¾",en:"Angostura Bitters",a:"2 æŠ–æŒ¯"},{zh:"æ–¹ç³–",en:"Sugar Cube",a:"1 é¡†"},{zh:"è˜‡æ‰“æ°´",en:"Soda Water",a:"å°‘é‡"}],ga:"æŸ³æ©™ç‰‡èˆ‡æ«»æ¡ƒ"},
{id:3,en:"Daiquiri",zh:"é»›ç¶ºè‰",cat:"before-dinner",catZh:"é¤å‰é…’",m:"shake",gZh:"é›å°¾é…’æ¯",
 ing:[{zh:"ç™½è˜­å§†é…’",en:"White Rum",a:"45 æ¯«å‡"},{zh:"æ–°é®®èŠå§†æ±",en:"Fresh Lime Juice",a:"20 æ¯«å‡"},{zh:"ç³–æ¼¿",en:"Simple Syrup",a:"15 æ¯«å‡"}],ga:"èŠå§†ç‰‡"},
{id:4,en:"Negroni",zh:"å…§æ ¼ç¾…å°¼",cat:"before-dinner",catZh:"é¤å‰é…’",m:"stir",gZh:"å¤å…¸æ¯",
 ing:[{zh:"ç´é…’",en:"Gin",a:"30 æ¯«å‡"},{zh:"é‡‘å·´åˆ©",en:"Campari",a:"30 æ¯«å‡"},{zh:"ç”œé¦™è‰¾é…’",en:"Sweet Vermouth",a:"30 æ¯«å‡"}],ga:"æ©™çš®"},
{id:5,en:"Queen's Dubonnet",zh:"å¥³ç‹æœæœ¬å…§",cat:"before-dinner",catZh:"é¤å‰é…’",m:"stir",gZh:"é›å°¾é…’æ¯",
 ing:[{zh:"ç´é…’",en:"Gin",a:"30 æ¯«å‡"},{zh:"ç´…æœæœ¬å…§",en:"Red Dubonnet",a:"45 æ¯«å‡"}],ga:"æª¸æª¬çš®æ²"},
{id:6,en:"Whiskey Sour",zh:"å¨å£«å¿Œé…¸é…’",cat:"before-dinner",catZh:"é¤å‰é…’",m:"shake",gZh:"å¤å…¸æ¯",
 ing:[{zh:"æ³¢æœ¬å¨å£«å¿Œ",en:"Bourbon Whiskey",a:"45 æ¯«å‡"},{zh:"æ–°é®®æª¸æª¬æ±",en:"Fresh Lemon Juice",a:"30 æ¯«å‡"},{zh:"ç³–æ¼¿",en:"Sugar Syrup",a:"15 æ¯«å‡"}],ga:"æ«»æ¡ƒèˆ‡æŸ³æ©™ç‰‡"},
{id:7,en:"Gin Tonic",zh:"ç´é€šå¯§",cat:"long-drink",catZh:"é•·é£²",m:"build",gZh:"é«˜çƒæ¯",
 ing:[{zh:"ç´é…’",en:"Gin",a:"45 æ¯«å‡"},{zh:"é€šå¯§æ°´",en:"Tonic Water",a:"è£œæ»¿"}],ga:"èŠå§†è§’"},
{id:8,en:"Mojito",zh:"è«å¸Œæ‰˜",cat:"long-drink",catZh:"é•·é£²",m:"muddle",gZh:"é«˜çƒæ¯",
 ing:[{zh:"ç™½è˜­å§†é…’",en:"White Rum",a:"45 æ¯«å‡"},{zh:"æ–°é®®èŠå§†æ±",en:"Fresh Lime Juice",a:"20 æ¯«å‡"},{zh:"ç™½ç ‚ç³–",en:"Sugar",a:"2 å§åŒ™"},{zh:"è–„è·è‘‰",en:"Mint Leaves",a:"12 ç‰‡"},{zh:"è˜‡æ‰“æ°´",en:"Soda Water",a:"è£œæ»¿"}],ga:"è–„è·æèˆ‡èŠå§†"},
{id:9,en:"Singapore Sling",zh:"æ–°åŠ å¡å¸ä»¤",cat:"long-drink",catZh:"é•·é£²",m:"shake",gZh:"é¢¶é¢¨æ¯",
 ing:[{zh:"ç´é…’",en:"Gin",a:"30 æ¯«å‡"},{zh:"æ«»æ¡ƒç”œé…’",en:"Cherry Liqueur",a:"15 æ¯«å‡"},{zh:"å›åº¦æ©™é…’",en:"Cointreau",a:"10 æ¯«å‡"},{zh:"æœ¬ç¯¤ç”œé…’",en:"DOM BÃ©nÃ©dictine",a:"10 æ¯«å‡"},{zh:"æ–°é®®é³³æ¢¨æ±",en:"Fresh Pineapple Juice",a:"120 æ¯«å‡"},{zh:"æ–°é®®èŠå§†æ±",en:"Fresh Lime Juice",a:"15 æ¯«å‡"},{zh:"ç´…çŸ³æ¦´ç³–æ¼¿",en:"Grenadine Syrup",a:"10 æ¯«å‡"},{zh:"å®‰æ ¼å¼è‹¦ç²¾",en:"Angostura Bitters",a:"1 æŠ–æŒ¯"}],ga:"é³³æ¢¨ç‰‡èˆ‡æ«»æ¡ƒ"},
{id:10,en:"Tequila Sunrise",zh:"é¾èˆŒè˜­æ—¥å‡º",cat:"long-drink",catZh:"é•·é£²",m:"build",gZh:"é«˜çƒæ¯",
 ing:[{zh:"é¾èˆŒè˜­",en:"Tequila",a:"45 æ¯«å‡"},{zh:"æ–°é®®æŸ³æ©™æ±",en:"Fresh Orange Juice",a:"90 æ¯«å‡"},{zh:"ç´…çŸ³æ¦´ç³–æ¼¿",en:"Grenadine Syrup",a:"15 æ¯«å‡"}],ga:"æŸ³æ©™ç‰‡èˆ‡æ«»æ¡ƒ"},
{id:11,en:"Sex on the Beach",zh:"æµ·ç˜æƒ…äºº",cat:"long-drink",catZh:"é•·é£²",m:"shake",gZh:"é«˜çƒæ¯",
 ing:[{zh:"ä¼ç‰¹åŠ ",en:"Vodka",a:"40 æ¯«å‡"},{zh:"æ°´èœœæ¡ƒç”œé…’",en:"Peach Liqueur",a:"20 æ¯«å‡"},{zh:"æ–°é®®æŸ³æ©™æ±",en:"Fresh Orange Juice",a:"40 æ¯«å‡"},{zh:"è”“è¶Šè“æ±",en:"Cranberry Juice",a:"40 æ¯«å‡"}],ga:"æŸ³æ©™ç‰‡"},
{id:12,en:"Long Island Iced Tea",zh:"é•·å³¶å†°èŒ¶",cat:"long-drink",catZh:"é•·é£²",m:"build",gZh:"å¯æ—æ¯",
 ing:[{zh:"ä¼ç‰¹åŠ ",en:"Vodka",a:"15 æ¯«å‡"},{zh:"ç´é…’",en:"Gin",a:"15 æ¯«å‡"},{zh:"é¾èˆŒè˜­",en:"Tequila",a:"15 æ¯«å‡"},{zh:"ç™½è˜­å§†é…’",en:"White Rum",a:"15 æ¯«å‡"},{zh:"å›åº¦æ©™é…’",en:"Cointreau",a:"15 æ¯«å‡"},{zh:"æª¸æª¬æ±",en:"Lemon Juice",a:"25 æ¯«å‡"},{zh:"ç³–æ¼¿",en:"Simple Syrup",a:"30 æ¯«å‡"},{zh:"å¯æ¨‚",en:"Cola",a:"è£œæ»¿"}],ga:"æª¸æª¬è§’"},
{id:13,en:"Alexander",zh:"äºæ­·å±±å¤§",cat:"after-dinner",catZh:"é¤å¾Œé…’",m:"shake",gZh:"é›å°¾é…’æ¯",
 ing:[{zh:"ç™½è˜­åœ°",en:"Brandy",a:"30 æ¯«å‡"},{zh:"æ·±è‰²å¯å¯é…’",en:"Brown CrÃ¨me de Cacao",a:"30 æ¯«å‡"},{zh:"é®®å¥¶æ²¹",en:"Fresh Cream",a:"30 æ¯«å‡"}],ga:"è±†è”»ç²‰"},
{id:14,en:"Angel's Kiss",zh:"å¤©ä½¿ä¹‹å»",cat:"after-dinner",catZh:"é¤å¾Œé…’",m:"layer",gZh:"åˆ©å£é…’æ¯",
 ing:[{zh:"æ·±è‰²å¯å¯é…’",en:"Brown CrÃ¨me de Cacao",a:"3/4ï¼ˆç´„ 45 æ¯«å‡ï¼‰"},{zh:"é®®å¥¶æ²¹",en:"Fresh Cream",a:"1/4ï¼ˆç´„ 15 æ¯«å‡ï¼‰"}],ga:"æ’ç±¤æ«»æ¡ƒ"},
{id:15,en:"B-52",zh:"B-52è½Ÿç‚¸æ©Ÿ",cat:"after-dinner",catZh:"é¤å¾Œé…’",m:"layer",gZh:"çƒˆé…’æ¯",
 ing:[{zh:"å¡é­¯å“‡å’–å•¡ç”œé…’",en:"KahlÃºa",a:"20 æ¯«å‡"},{zh:"è²ç¦®è©©å¥¶é…’",en:"Bailey's Cream",a:"20 æ¯«å‡"},{zh:"æŸ‘æ›¼æ€¡é¦™æ©™ç”œé…’",en:"Grand Marnier",a:"20 æ¯«å‡"}],ga:"å¯é»ç«"},
{id:16,en:"Grasshopper",zh:"ç¶ èš±èœ¢",cat:"after-dinner",catZh:"é¤å¾Œé…’",m:"shake",gZh:"é›å°¾é…’æ¯",
 ing:[{zh:"ç™½è‰²å¯å¯é…’",en:"White CrÃ¨me de Cacao",a:"20 æ¯«å‡"},{zh:"ç¶ è–„è·é…’",en:"Green CrÃ¨me de Menthe",a:"20 æ¯«å‡"},{zh:"é®®å¥¶æ²¹",en:"Fresh Cream",a:"20 æ¯«å‡"}],ga:"è–„è·è‘‰"},
{id:17,en:"Chocolate Lady",zh:"å·§å…‹åŠ›å¥³å£«",cat:"after-dinner",catZh:"é¤å¾Œé…’",m:"float",gZh:"å¤§é›å°¾é…’æ¯",
 ing:[{zh:"å¨å£«å¿Œ",en:"Whisky",a:"30 æ¯«å‡"},{zh:"æ·±è‰²å¯å¯é…’",en:"Brown CrÃ¨me de Cacao",a:"30 æ¯«å‡"},{zh:"å·§å…‹åŠ›é†¬",en:"Chocolate Syrup",a:"30 æ¯«å‡"},{zh:"é®®å¥¶æ²¹",en:"Fresh Cream",a:"30 æ¯«å‡"}],ga:"å·§å…‹åŠ›ç²‰"},
{id:18,en:"Sweet Formula",zh:"ç”œèœœé…æ–¹",cat:"after-dinner",catZh:"é¤å¾Œé…’",m:"float",gZh:"é›å°¾é…’æ¯",
 ing:[{zh:"æ ¼è˜­ç‰¹å¨å£«å¿Œ",en:"Grant's Whisky",a:"40 æ¯«å‡"},{zh:"å—ç“œæœæ³¥",en:"Pumpkin ReÃ l PurÃ©e",a:"10 æ¯«å‡"},{zh:"æ°´èœœæ¡ƒæœæ³¥",en:"Peach ReÃ l PurÃ©e",a:"10 æ¯«å‡"},{zh:"å·§å…‹åŠ›é†¬",en:"Chocolate Syrup",a:"20 æ¯«å‡"},{zh:"é®®å¥¶æ²¹",en:"Fresh Cream",a:"30 æ¯«å‡"}],ga:"å·§å…‹åŠ›é†¬æ·‹é£¾"},
{id:19,en:"Kamikaze",zh:"ç¥é¢¨ç‰¹æ”»éšŠ",cat:"all-day",catZh:"å…¨å¤©å€™",m:"shake",gZh:"é›å°¾é…’æ¯",
 ing:[{zh:"ä¼ç‰¹åŠ ",en:"Vodka",a:"30 æ¯«å‡"},{zh:"ç™½æ©™çš®ç”œé…’",en:"Triple Sec",a:"30 æ¯«å‡"},{zh:"æ–°é®®èŠå§†æ±",en:"Fresh Lime Juice",a:"30 æ¯«å‡"}],ga:"èŠå§†è§’"},
{id:20,en:"Side Car",zh:"å´è»Š",cat:"all-day",catZh:"å…¨å¤©å€™",m:"shake",gZh:"é›å°¾é…’æ¯ï¼ˆç³–å£æ¯ï¼‰",
 ing:[{zh:"ç™½è˜­åœ°",en:"Brandy",a:"40 æ¯«å‡"},{zh:"ç™½æ©™çš®ç”œé…’",en:"Triple Sec",a:"20 æ¯«å‡"},{zh:"æ–°é®®æª¸æª¬æ±",en:"Fresh Lemon Juice",a:"20 æ¯«å‡"}],ga:"æª¸æª¬çš®æ²"},
{id:21,en:"Margarita",zh:"ç‘ªæ ¼éº—ç‰¹",cat:"all-day",catZh:"å…¨å¤©å€™",m:"shake",gZh:"ç‘ªæ ¼éº—ç‰¹æ¯ï¼ˆé¹½å£æ¯ï¼‰",
 ing:[{zh:"é¾èˆŒè˜­",en:"Tequila",a:"35 æ¯«å‡"},{zh:"å›åº¦æ©™é…’",en:"Cointreau",a:"20 æ¯«å‡"},{zh:"æ–°é®®èŠå§†æ±",en:"Fresh Lime Juice",a:"15 æ¯«å‡"}],ga:"èŠå§†è§’"},
{id:22,en:"Cosmopolitan",zh:"æŸ¯å¤¢æ³¢ä¸¹",cat:"all-day",catZh:"å…¨å¤©å€™",m:"shake",gZh:"é›å°¾é…’æ¯",
 ing:[{zh:"æª¸æª¬ä¼ç‰¹åŠ ",en:"Vodka Citron",a:"40 æ¯«å‡"},{zh:"å›åº¦æ©™é…’",en:"Cointreau",a:"15 æ¯«å‡"},{zh:"æ–°é®®èŠå§†æ±",en:"Fresh Lime Juice",a:"15 æ¯«å‡"},{zh:"è”“è¶Šè“æ±",en:"Cranberry Juice",a:"30 æ¯«å‡"}],ga:"ç«çƒ¤æ©™çš®"},
{id:23,en:"Black Russian",zh:"é»‘ä¿„ç¾…æ–¯",cat:"all-day",catZh:"å…¨å¤©å€™",m:"build",gZh:"å¤å…¸æ¯",
 ing:[{zh:"ä¼ç‰¹åŠ ",en:"Vodka",a:"50 æ¯«å‡"},{zh:"å¡é­¯å“‡å’–å•¡ç”œé…’",en:"KahlÃºa",a:"20 æ¯«å‡"}],ga:"ç„¡"},
{id:24,en:"Screwdriver",zh:"èºçµ²èµ·å­",cat:"all-day",catZh:"å…¨å¤©å€™",m:"build",gZh:"é«˜çƒæ¯",
 ing:[{zh:"ä¼ç‰¹åŠ ",en:"Vodka",a:"50 æ¯«å‡"},{zh:"æ–°é®®æŸ³æ©™æ±",en:"Fresh Orange Juice",a:"è£œæ»¿"}],ga:"æŸ³æ©™ç‰‡"}
];

const MN={shake:"æ–ç›ªæ³•",stir:"æ”ªæ‹Œæ³•",build:"ç›´èª¿æ³•",muddle:"æ—å£“æ³•",layer:"åˆ†å±¤æ³•",float:"æ¼‚æµ®æ³•"};
const CN={"before-dinner":"é¤å‰é…’","long-drink":"é•·é£²","after-dinner":"é¤å¾Œé…’","all-day":"å…¨å¤©å€™"};

const SP=[
{zh:"é‡‘è³“æ³¢æœ¬å¨å£«å¿Œ",en:"Jim Beam White Bourbon",tp:"æ³¢æœ¬å¨å£«å¿Œ",cat:"åŸºé…’",usg:"è€å¼é›å°¾é…’ã€å¨å£«å¿Œé…¸é…’"},
{zh:"ç™¾åŠ å¾—ç™½è˜­å§†é…’",en:"Bacardi Superior White Rum",tp:"ç™½è˜­å§†é…’",cat:"åŸºé…’",usg:"è«å¸Œæ‰˜ã€é»›ç¶ºè‰ã€é‡‘è‰²é–ƒè€€"},
{zh:"å“ˆç“¦é‚£ä¿±æ¨‚éƒ¨3å¹´è˜­å§†é…’",en:"Havana Club 3 AÃ±os",tp:"ç™½è˜­å§†é…’",cat:"åŸºé…’",usg:"é‡‘è‰²é–ƒè€€ã€è«å¸Œæ‰˜"},
{zh:"ç‘å…¸çµ•å°ä¼ç‰¹åŠ ",en:"Absolut Vodka",tp:"ä¼ç‰¹åŠ ",cat:"åŸºé…’",usg:"ç¥é¢¨ç‰¹æ”»éšŠã€é•·å³¶å†°èŒ¶ã€é»‘ä¿„ç¾…æ–¯"},
{zh:"ç‘å…¸çµ•å°æª¸æª¬ä¼ç‰¹åŠ ",en:"Absolut Citron",tp:"èª¿å‘³ä¼ç‰¹åŠ ",cat:"åŸºé…’",usg:"æŸ¯å¤¢æ³¢ä¸¹"},
{zh:"è‹±äººç´é…’",en:"Beefeater London Dry Gin",tp:"å€«æ•¦ä¹¾ç´é…’",cat:"åŸºé…’",usg:"ç´é€šå¯§ã€æ–°åŠ å¡å¸ä»¤ã€é•·å³¶å†°èŒ¶"},
{zh:"ä¹ä¹ä¹é‡‘å¿«æ´»é¾èˆŒè˜­",en:"Jose Cuervo Especial Tequila",tp:"é¾èˆŒè˜­",cat:"åŸºé…’",usg:"ç‘ªæ ¼éº—ç‰¹ã€é¾èˆŒè˜­æ—¥å‡ºã€é•·å³¶å†°èŒ¶"},
{zh:"äººé ­é¦¬ç‰¹å„ªé¦™æª³å¹²é‚‘",en:"RÃ©my Martin VSOP Cognac",tp:"å¹²é‚‘ç™½è˜­åœ°",cat:"åŸºé…’",usg:"äºæ­·å±±å¤§ã€å´è»Š"},
{zh:"é¦¬ä¸å°¼ç´”é¦™è‹¦è‰¾é…’",en:"Martini Extra Dry Vermouth",tp:"ä¸ç”œè‹¦è‰¾é…’",cat:"åŸºé…’",usg:"é¦¬ä¸å°¼ã€é‡‘è‰²é–ƒè€€"},
{zh:"æ³•åœ‹å›åº¦é¦™æ©™é…’",en:"Cointreau",tp:"æ©™çš®ç”œé…’",cat:"åˆ©å£é…’",usg:"ç‘ªæ ¼éº—ç‰¹ã€é•·å³¶å†°èŒ¶ã€æŸ¯å¤¢æ³¢ä¸¹"},
{zh:"æŸ‘æ›¼æ€¡é¦™æ©™ç”œé…’",en:"Grand Marnier Cordon Rouge",tp:"æ©™çš®ç”œé…’",cat:"åˆ©å£é…’",usg:"é‡‘è‰²é–ƒè€€ã€B-52è½Ÿç‚¸æ©Ÿ"},
{zh:"å¡é­¯å“‡å’–å•¡ç”œé…’",en:"KahlÃºa Coffee Liqueur",tp:"å’–å•¡ç”œé…’",cat:"åˆ©å£é…’",usg:"é»‘ä¿„ç¾…æ–¯ã€B-52è½Ÿç‚¸æ©Ÿ"},
{zh:"ç­å°¼ç‹„å…‹ä¸ç”œé…’",en:"BÃ©nÃ©dictine D.O.M",tp:"è‰æœ¬ç”œé…’",cat:"åˆ©å£é…’",usg:"æ–°åŠ å¡å¸ä»¤"},
{zh:"é‡‘å·´åˆ©è‹¦é…’",en:"Campari",tp:"è‹¦å‘³åˆ©å£é…’",cat:"åˆ©å£é…’",usg:"å…§æ ¼ç¾…å°¼"},
{zh:"å¤šå¯¶åŠ›ç´…é…’",en:"Dubonnet Red",tp:"åŠ å‘³è‘¡è„é…’",cat:"åˆ©å£é…’",usg:"å¥³ç‹æœæœ¬å…§"},
{zh:"ç‘ªè‰ç™½èç™½å¯å¯ç”œé…’",en:"Marie Brizard White CrÃ¨me de Cacao",tp:"å¯å¯ç”œé…’",cat:"åˆ©å£é…’",usg:"ç¶ èš±èœ¢"},
{zh:"ç‘ªè‰ç™½èæ£•å¯å¯ç”œé…’",en:"Marie Brizard Brown CrÃ¨me de Cacao",tp:"å¯å¯ç”œé…’",cat:"åˆ©å£é…’",usg:"äºæ­·å±±å¤§ã€å¤©ä½¿ä¹‹å»ã€å·§å…‹åŠ›å¥³å£«"},
{zh:"ç‘ªè‰ç™½èç¶ è–„è·ç”œé…’",en:"Marie Brizard Green CrÃ¨me de Menthe",tp:"è–„è·ç”œé…’",cat:"åˆ©å£é…’",usg:"ç¶ èš±èœ¢"},
{zh:"ç‘ªè‰ç™½èç™½æ©™çš®ç”œé…’",en:"Marie Brizard Triple Sec",tp:"æ©™çš®ç”œé…’",cat:"åˆ©å£é…’",usg:"ç¥é¢¨ç‰¹æ”»éšŠã€å´è»Š"},
{zh:"ç‘ªè‰ç™½èæä»ç”œé…’",en:"Marie Brizard Amaretto",tp:"æä»ç”œé…’",cat:"åˆ©å£é…’",usg:"æ•™çˆ¶ã€æä»é…¸é…’"},
{zh:"ç‘ªè‰ç™½èæ°´èœœæ¡ƒç”œé…’",en:"Marie Brizard Peach Liqueur",tp:"æ°´èœœæ¡ƒç”œé…’",cat:"åˆ©å£é…’",usg:"æµ·ç˜æƒ…äºº"},
{zh:"ç‘ªè‰ç™½èæ«»æ¡ƒç™½è˜­åœ°ç”œé…’",en:"Marie Brizard Jolie Cherry",tp:"æ«»æ¡ƒç”œé…’",cat:"åˆ©å£é…’",usg:"æ–°åŠ å¡å¸ä»¤"},
{zh:"ç‘ªè‰ç™½èè¦†ç›†å­ç”œé…’",en:"Marie Brizard Framboise",tp:"è¦†ç›†å­ç”œé…’",cat:"åˆ©å£é…’",usg:"è¦†ç›†å­é¦¬ä¸å°¼"},
{zh:"è«æ—å·§å…‹åŠ›ç³–æ¼¿",en:"Monin Chocolate Syrup",tp:"å·§å…‹åŠ›ç³–æ¼¿",cat:"ç³–æ¼¿",usg:"å·§å…‹åŠ›å¥³å£«ã€ç”œèœœé…æ–¹"},
{zh:"è«æ—ç´…çŸ³æ¦´ç³–æ¼¿",en:"Monin Grenadine Syrup",tp:"ç´…çŸ³æ¦´ç³–æ¼¿",cat:"ç³–æ¼¿",usg:"é¾èˆŒè˜­æ—¥å‡ºã€æ–°åŠ å¡å¸ä»¤"}
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HELPERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function shuf(a){const b=[...a];for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[b[i],b[j]]=[b[j],b[i]];}return b;}
function pick(a,n,ex){const p=a.filter(x=>!ex||!ex.includes(x));return shuf(p).slice(0,n);}
function pickOne(a,ex){return pick(a,1,ex)[0];}
function uniq(a){return[...new Set(a)];}

const allM=Object.values(MN),allG=uniq(C.map(c=>c.gZh)),allCat=Object.values(CN),allGa=uniq(C.map(c=>c.ga));
const allIng=uniq(C.flatMap(c=>c.ing.map(i=>i.zh))),allAmt=uniq(C.flatMap(c=>c.ing.map(i=>i.a)));
const allCZh=C.map(c=>c.zh),allCEn=C.map(c=>c.en);

function q(cat,txt,ans,wrongs){return{cat,txt,ans,opts:shuf([ans,...wrongs.slice(0,3)])};}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUESTION GENERATOR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function generate(){
const Q=[];

C.forEach(c=>{
    Q.push(q('èª¿è£½æŠ€æ³•',`ã€Œ${c.zh}ã€ä½¿ç”¨ä»€éº¼èª¿è£½æ–¹æ³•ï¼Ÿ`,MN[c.m],pick(allM,3,[MN[c.m]])));
    Q.push(q('æ¯å…·çŸ¥è­˜',`ã€Œ${c.zh}ã€ä½¿ç”¨ä»€éº¼æ¯å­ï¼Ÿ`,c.gZh,pick(allG,3,[c.gZh])));
    Q.push(q('é…’æ¬¾åˆ†é¡',`ã€Œ${c.zh}ã€å±¬æ–¼å“ªä¸€å€‹åˆ†é¡ï¼Ÿ`,c.catZh,pick(allCat,3,[c.catZh])));
    Q.push(q('è£é£¾æ­é…',`ã€Œ${c.zh}ã€çš„è£é£¾ç‰©æ˜¯ä»€éº¼ï¼Ÿ`,c.ga,pick(allGa,3,[c.ga])));
    const ci=pickOne(c.ing.map(i=>i.zh));
    Q.push(q('ææ–™è¾¨è­˜',`ä»¥ä¸‹å“ªå€‹æ˜¯ã€Œ${c.zh}ã€çš„ææ–™ï¼Ÿ`,ci,pick(allIng,3,c.ing.map(i=>i.zh))));
    const ni=pickOne(allIng,c.ing.map(i=>i.zh));
    if(ni)Q.push(q('ææ–™è¾¨è­˜',`ä»¥ä¸‹å“ªå€‹<em>ä¸æ˜¯</em>ã€Œ${c.zh}ã€çš„ææ–™ï¼Ÿ`,ni,pick(c.ing.map(i=>i.zh),3)));
    const cnt=String(c.ing.length);
    Q.push(q('é…æ–¹çµæ§‹',`ã€Œ${c.zh}ã€å…±æœ‰å¹¾ç¨®ææ–™ï¼Ÿ`,cnt,pick(['2','3','4','5','6','7','8'].filter(x=>x!==cnt),3)));
    shuf(c.ing).slice(0,3).forEach(ig=>{
        const wa=pick(allAmt,3,[ig.a]);
        if(wa.length>=3) Q.push(q('ç”¨é‡è¨˜æ†¶',`ã€Œ${c.zh}ã€ä¸­ã€Œ${ig.zh}ã€çš„ç”¨é‡æ˜¯å¤šå°‘ï¼Ÿ`,ig.a,wa));
    });
});

const i2c={};
C.forEach(c=>c.ing.forEach(i=>{if(!i2c[i.zh])i2c[i.zh]=[];i2c[i.zh].push(c.zh);}));
Object.entries(i2c).forEach(([ing,cs])=>{
    const cor=pickOne(cs),wr=pick(allCZh,3,cs);
    if(wr.length>=3) Q.push(q('ææ–™è¾¨è­˜',`ä»¥ä¸‹å“ªæ¯èª¿é…’ä½¿ç”¨äº†ã€Œ${ing}ã€ï¼Ÿ`,cor,wr));
});

Object.entries(MN).forEach(([k,n])=>{
    const yes=C.filter(c=>c.m===k).map(c=>c.zh),no=C.filter(c=>c.m!==k).map(c=>c.zh);
    if(yes.length&&no.length>=3){
        Q.push(q('èª¿è£½æŠ€æ³•',`ä»¥ä¸‹å“ªæ¯èª¿é…’ä½¿ç”¨ã€Œ${n}ã€ï¼Ÿ`,pickOne(yes),pick(no,3)));
        Q.push(q('èª¿è£½æŠ€æ³•',`ä»¥ä¸‹å“ªæ¯èª¿é…’<em>ä¸æ˜¯</em>ä½¿ç”¨ã€Œ${n}ã€ï¼Ÿ`,pickOne(no),pick(yes,3).slice(0,3)));
    }
});

Object.entries(CN).forEach(([k,n])=>{
    const yes=C.filter(c=>c.cat===k).map(c=>c.zh),no=C.filter(c=>c.cat!==k).map(c=>c.zh);
    if(yes.length&&no.length>=3){
        Q.push(q('é…’æ¬¾åˆ†é¡',`ä»¥ä¸‹å“ªæ¯èª¿é…’å±¬æ–¼ã€Œ${n}ã€ï¼Ÿ`,pickOne(yes),pick(no,3)));
        Q.push(q('é…’æ¬¾åˆ†é¡',`ä»¥ä¸‹å“ªæ¯èª¿é…’<em>ä¸æ˜¯</em>ã€Œ${n}ã€ï¼Ÿ`,pickOne(no),pick(yes,3).slice(0,3)));
    }
});

const g2c={};C.forEach(c=>{if(!g2c[c.gZh])g2c[c.gZh]=[];g2c[c.gZh].push(c.zh);});
Object.entries(g2c).forEach(([g,cs])=>{
    const no=C.filter(c=>c.gZh!==g).map(c=>c.zh);
    if(no.length>=3) Q.push(q('æ¯å…·çŸ¥è­˜',`ä»¥ä¸‹å“ªæ¯èª¿é…’ä½¿ç”¨ã€Œ${g}ã€ï¼Ÿ`,pickOne(cs),pick(no,3)));
});

const ga2c={};C.forEach(c=>{if(!ga2c[c.ga])ga2c[c.ga]=[];ga2c[c.ga].push(c.zh);});
Object.entries(ga2c).forEach(([g,cs])=>{
    const no=C.filter(c=>c.ga!==g).map(c=>c.zh);
    if(no.length>=3) Q.push(q('è£é£¾æ­é…',`ä»¥ä¸‹å“ªæ¯èª¿é…’çš„è£é£¾ç‰©æ˜¯ã€Œ${g}ã€ï¼Ÿ`,pickOne(cs),pick(no,3)));
});

const allSpZh=SP.map(s=>s.zh),allSpEn=SP.map(s=>s.en),allSpTp=uniq(SP.map(s=>s.tp)),allSpCat=uniq(SP.map(s=>s.cat));
SP.forEach(s=>{
    Q.push(q('åŸºé…’çŸ¥è­˜',`ã€Œ${s.zh}ã€å±¬æ–¼ä»€éº¼é¡å‹ï¼Ÿ`,s.tp,pick(allSpTp,3,[s.tp])));
    Q.push(q('åŸºé…’çŸ¥è­˜',`ã€Œ${s.zh}ã€å±¬æ–¼ä»¥ä¸‹å“ªå€‹å¤§åˆ†é¡ï¼Ÿ`,s.cat,pick(allSpCat,3,[s.cat])));
    if(s.usg){const us=s.usg.split('ã€'),cor=pickOne(us),wr=pick(allCZh,3,us);
        if(cor&&wr.length>=3) Q.push(q('åŸºé…’çŸ¥è­˜',`ã€Œ${s.zh}ã€å¸¸ç”¨æ–¼ä»¥ä¸‹å“ªæ¯èª¿é…’ï¼Ÿ`,cor,wr));}
});

const ingPairs=[];C.forEach(c=>c.ing.forEach(i=>{if(!ingPairs.find(p=>p.zh===i.zh))ingPairs.push(i);}));

for(let i=0;i<16;i++){
    const s4=shuf(C).slice(0,4);
    const maxLen=Math.max(...s4.map(x=>x.ing.length));
    const minLen=Math.min(...s4.map(x=>x.ing.length));
    const mostList=s4.filter(x=>x.ing.length===maxLen);
    const leastList=s4.filter(x=>x.ing.length===minLen);
    // åªæœ‰å”¯ä¸€æœ€å¤š/æœ€å°‘æ™‚æ‰å‡ºé¡Œï¼Œé¿å…å¤šå€‹æ­£ç¢ºç­”æ¡ˆ
    if(mostList.length===1){
        const most=mostList[0];
        Q.push(q('é…æ–¹çµæ§‹',`ä»¥ä¸‹å“ªæ¯èª¿é…’çš„ææ–™ç¨®é¡æœ€å¤šï¼Ÿ`,most.zh,s4.filter(x=>x!==most).map(x=>x.zh)));
    }
    if(leastList.length===1){
        const least=leastList[0];
        Q.push(q('é…æ–¹çµæ§‹',`ä»¥ä¸‹å“ªæ¯èª¿é…’çš„ææ–™ç¨®é¡æœ€å°‘ï¼Ÿ`,least.zh,s4.filter(x=>x!==least).map(x=>x.zh)));
    }
}

C.forEach(c=>c.ing.forEach(ig=>{
    const wa=pick(allAmt,3,[ig.a]);
    if(wa.length>=3) Q.push(q('ç”¨é‡è¨˜æ†¶',`åœ¨ã€Œ${c.zh}ã€çš„é…æ–¹ä¸­ï¼Œã€Œ${ig.zh}ã€éœ€è¦å¤šå°‘ï¼Ÿ`,ig.a,wa));
}));

// â•â•â• å…±ç”¨ææ–™é¡Œ â•â•â•
Object.entries(i2c).forEach(([ing,cs])=>{
    if(cs.length>=2){
        const no=allCZh.filter(x=>!cs.includes(x));
        if(no.length>=1){
            const cor=pickOne(no);
            Q.push(q('ææ–™è¾¨è­˜',`ä»¥ä¸‹å“ªæ¯èª¿é…’<em>æ²’æœ‰</em>ä½¿ç”¨ã€Œ${ing}ã€ï¼Ÿ`,cor,pick(cs,3)));
        }
    }
});

// â•â•â• åŒåˆ†é¡æ¯”è¼ƒé¡Œ â•â•â•
Object.keys(CN).forEach(cat=>{
    const group=C.filter(c=>c.cat===cat);
    if(group.length>=4){
        for(let i=0;i<3;i++){
            const s4=shuf(group).slice(0,4);
            const maxLen=Math.max(...s4.map(x=>x.ing.length));
            const mostList=s4.filter(x=>x.ing.length===maxLen);
            // åªæœ‰å”¯ä¸€æœ€å¤šæ™‚æ‰å‡ºé¡Œ
            if(mostList.length===1){
                const most=mostList[0];
                Q.push(q('é…æ–¹çµæ§‹',`åœ¨ã€Œ${CN[cat]}ã€ä¸­ï¼Œä»¥ä¸‹å“ªæ¯èª¿é…’çš„ææ–™æœ€å¤šï¼Ÿ`,most.zh,s4.filter(x=>x!==most).map(x=>x.zh)));
            }
        }
    }
});

// â•â•â• æ–¹æ³•é…æ¯é¡Œ â•â•â•
C.forEach(c=>{
    Q.push(q('æ¯å…·çŸ¥è­˜',`ä½¿ç”¨ã€Œ${MN[c.m]}ã€èª¿è£½çš„ã€Œ${c.zh}ã€ï¼Œæ‡‰è©²ç››è£åœ¨ä»€éº¼æ¯å­ï¼Ÿ`,c.gZh,pick(allG,3,[c.gZh])));
});

// â•â•â• ç¬¬ä¸€ææ–™é¡Œ â•â•â•
C.forEach(c=>{
    if(c.ing.length>=2){
        const first=c.ing[0].zh;
        Q.push(q('ææ–™è¾¨è­˜',`ã€Œ${c.zh}ã€çš„ç¬¬ä¸€ç¨®ï¼ˆä¸»è¦ï¼‰ææ–™æ˜¯ä»€éº¼ï¼Ÿ`,first,pick(allIng,3,[first])));
    }
});

// â•â•â• è£é£¾åæ¨åˆ†é¡é¡Œ â•â•â•
Object.entries(ga2c).forEach(([g,cs])=>{
    if(cs.length>=2){
        const cor=pickOne(cs);
        const other=cs.filter(x=>x!==cor);
        const no=allCZh.filter(x=>!cs.includes(x));
        if(no.length>=2&&other.length>=1) Q.push(q('è£é£¾æ­é…',`ä»¥ä¸‹å“ªæ¯èª¿é…’çš„è£é£¾ç‰©<em>ä¸æ˜¯</em>ã€Œ${g}ã€ï¼Ÿ`,pickOne(no),pick(cs,3)));
    }
});

// â•â•â• èª¿é…’â†’åˆ†é¡ åå‘åŠ å¼· â•â•â•
C.forEach(c=>{
    const sameCat=C.filter(x=>x.cat===c.cat&&x.id!==c.id).map(x=>x.zh);
    const diffCat=C.filter(x=>x.cat!==c.cat).map(x=>x.zh);
    if(sameCat.length>=1&&diffCat.length>=1){
        Q.push(q('é…’æ¬¾åˆ†é¡',`ä»¥ä¸‹å“ªæ¯èª¿é…’å’Œã€Œ${c.zh}ã€å±¬æ–¼åŒä¸€åˆ†é¡ï¼Ÿ`,pickOne(sameCat),pick(diffCat,3)));
    }
});

// â•â•â• é»˜å¯«é¡Œï¼ˆå¡«ç©ºï¼‰â•â•â•
C.forEach(c=>{
    if(c.ing.length>=3){
        // éš¨æ©Ÿé¸ä¸€å€‹ææ–™ä½œç‚ºç­”æ¡ˆï¼Œå…¶é¤˜é¡¯ç¤º
        const shuffledIng=shuf(c.ing);
        const hidden=shuffledIng[0];
        const shown=shuffledIng.slice(1);
        Q.push({
            cat:'ææ–™é»˜å¯«',
            txt:`è«‹å¡«å¯«ã€Œ${c.zh}ã€ç¼ºå°‘çš„ææ–™ï¼š`,
            ans:hidden.zh,
            type:'fill',
            shownIng:shown.map(i=>i.zh),
            hint:hidden.zh.length
        });
    }
});

const seen=new Set(),unique=[];
for(const item of shuf(Q)){
    // é»˜å¯«é¡Œæ²’æœ‰ optsï¼Œé¸æ“‡é¡Œéœ€è¦ 4 å€‹é¸é …
    if(item.type!=='fill' && (!item.opts || item.opts.length!==4))continue;
    const plain=item.txt.replace(/<[^>]+>/g,'');
    if(plain.includes(item.ans))continue;
    const key=item.txt+item.ans;
    if(!seen.has(key)){seen.add(key);unique.push(item);}
    if(unique.length>=500)break;
}
return unique;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUIZ ENGINE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let mode,questions,idx,score,wrongs,catSt,answered,timerSec,timerID;

document.getElementById('modes').addEventListener('click',e=>{
    const card=e.target.closest('.mode');if(!card)return;
    document.querySelectorAll('.mode').forEach(m=>m.classList.remove('sel'));
    card.classList.add('sel');mode=+card.dataset.mode;
    const btn=document.getElementById('go-btn');btn.disabled=false;
    btn.textContent=`é–‹å§‹ ${mode} é¡Œæ¸¬é©—`;
});
document.getElementById('go-btn').addEventListener('click',startQuiz);
document.getElementById('quit-btn').addEventListener('click',()=>{if(confirm('ç¢ºå®šè¦çµæŸæ¸¬é©—å—ï¼Ÿ'))endQuiz();});
document.getElementById('r-retry').addEventListener('click',()=>location.reload());
document.getElementById('r-review').addEventListener('click',toggleReview);

function startQuiz(){
    const all=generate();
    questions=mode>=500?all:shuf(all).slice(0,mode);
    idx=0;score=0;wrongs=[];catSt={};answered=false;timerSec=0;
    show('scr-quiz');startTimer();render();
}
function show(id){document.querySelectorAll('.screen,.flex-screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');window.scrollTo(0,0);}
function startTimer(){clearInterval(timerID);timerSec=0;timerID=setInterval(()=>{timerSec++;const m=String(Math.floor(timerSec/60)).padStart(2,'0'),s=String(timerSec%60).padStart(2,'0');document.getElementById('timer').textContent=m+':'+s;},1000);}

function render(){
    const qn=questions[idx],total=questions.length,pct=Math.round(idx/total*100);
    document.getElementById('p-lbl').textContent=`ç¬¬ ${idx+1} é¡Œ / å…± ${total} é¡Œ`;
    document.getElementById('p-pct').textContent=pct+'%';
    document.getElementById('p-bar').style.width=pct+'%';
    document.getElementById('sc-live').textContent=score;
    const labels=['A','B','C','D'];

    let contentHtml='';
    if(qn.type==='fill'){
        // é»˜å¯«é¡Œ
        contentHtml=`
        <div class="q-cat">${qn.cat}</div>
        <div class="q-num">Question ${idx+1}</div>
        <div class="q-txt">${qn.txt}</div>
        <ul class="ing-list">
            ${qn.shownIng.map(ing=>`<li>â€¢ ${ing}</li>`).join('')}
            <li class="blank">â€¢ ï¼Ÿï¼Ÿï¼Ÿ</li>
        </ul>
        <div class="fill-area">
            <div class="fill-hint">æç¤ºï¼šç­”æ¡ˆå…± ${qn.hint} å€‹å­—</div>
            <div class="fill-row">
                <input type="text" class="fill-input" id="fill-input" placeholder="è¼¸å…¥ç¼ºå°‘çš„ææ–™..." autocomplete="off">
                <button class="fill-submit" id="fill-submit">ç¢ºèª</button>
            </div>
        </div>
        <div class="fb" id="fb"></div>
        <button class="nxt" id="nxt">${idx<total-1?'ä¸‹ä¸€é¡Œ â†’':'æŸ¥çœ‹çµæœ'}</button>`;
    }else{
        // é¸æ“‡é¡Œ
        contentHtml=`
        <div class="q-cat">${qn.cat}</div>
        <div class="q-num">Question ${idx+1}</div>
        <div class="q-txt">${qn.txt}</div>
        <div class="opts" id="opts">${qn.opts.map((o,i)=>`<button class="opt" data-idx="${i}"><span class="opt-l">${labels[i]}</span><span class="opt-t">${o}</span></button>`).join('')}</div>
        <div class="fb" id="fb"></div>
        <button class="nxt" id="nxt">${idx<total-1?'ä¸‹ä¸€é¡Œ â†’':'æŸ¥çœ‹çµæœ'}</button>`;
    }

    document.getElementById('qa').innerHTML=contentHtml;
    answered=false;

    if(qn.type==='fill'){
        const input=document.getElementById('fill-input');
        const submitBtn=document.getElementById('fill-submit');
        submitBtn.addEventListener('click',()=>{if(!answered)submitFill();});
        input.addEventListener('keydown',e=>{if(e.key==='Enter'&&!answered)submitFill();});
        input.focus();
    }else{
        document.getElementById('opts').addEventListener('click',e=>{const btn=e.target.closest('.opt');if(!btn||answered)return;choose(btn);});
    }
    document.getElementById('nxt').addEventListener('click',next);
}

function choose(btn){
    answered=true;const qn=questions[idx],selected=btn.querySelector('.opt-t').textContent,correct=qn.ans,isOk=selected===correct;
    if(!catSt[qn.cat])catSt[qn.cat]={t:0,c:0};catSt[qn.cat].t++;
    document.querySelectorAll('.opt').forEach(b=>{b.disabled=true;const txt=b.querySelector('.opt-t').textContent;if(txt===correct)b.classList.add('ok');if(txt===selected&&!isOk)b.classList.add('no');});
    const fb=document.getElementById('fb');
    if(isOk){score++;catSt[qn.cat].c++;fb.className='fb fb-ok show';fb.innerHTML='âœ“ æ­£ç¢ºï¼';}
    else{fb.className='fb fb-no show';fb.innerHTML=`âœ— æ­£ç¢ºç­”æ¡ˆï¼š<b>${correct}</b>`;wrongs.push({q:qn.txt,y:selected,a:correct});}
    document.getElementById('sc-live').textContent=score;document.getElementById('nxt').classList.add('show');
}

function submitFill(){
    const qn=questions[idx];
    const input=document.getElementById('fill-input');
    const selected=input.value.trim();
    if(!selected)return; // ç©ºç™½ä¸è™•ç†
    answered=true;
    const correct=qn.ans;
    const isOk=selected===correct;
    if(!catSt[qn.cat])catSt[qn.cat]={t:0,c:0};
    catSt[qn.cat].t++;
    input.disabled=true;
    document.getElementById('fill-submit').disabled=true;
    const fb=document.getElementById('fb');
    if(isOk){
        score++;catSt[qn.cat].c++;
        input.classList.add('ok');
        fb.className='fb fb-ok show';
        fb.innerHTML='âœ“ æ­£ç¢ºï¼';
    }else{
        input.classList.add('no');
        fb.className='fb fb-no show';
        fb.innerHTML=`âœ— æ­£ç¢ºç­”æ¡ˆï¼š<b>${correct}</b>`;
        wrongs.push({q:qn.txt+' (å·²çŸ¥ï¼š'+qn.shownIng.join('ã€')+')',y:selected||'(æœªä½œç­”)',a:correct});
    }
    document.getElementById('sc-live').textContent=score;
    document.getElementById('nxt').classList.add('show');
}

function next(){idx++;if(idx>=questions.length)endQuiz();else{render();window.scrollTo({top:0,behavior:'smooth'});}}

function endQuiz(){
    clearInterval(timerID);const total=questions.length,pct=Math.round(score/total*100);
    let grade='';
    if(pct>=95)grade='ğŸ† èª¿é…’å¤§å¸« Master Bartender';
    else if(pct>=85)grade='ğŸ¥‡ è³‡æ·±èª¿é…’å¸« Senior Bartender';
    else if(pct>=75)grade='ğŸ¥ˆ åˆæ ¼èª¿é…’å¸« Bartender';
    else if(pct>=60)grade='ğŸ¥‰ èª¿é…’å­¸å¾’ Apprentice';
    else grade='ğŸ“š ç¹¼çºŒåŠ æ²¹ Keep Learning';
    document.getElementById('r-pct').textContent=pct+'%';
    document.getElementById('r-det').textContent=`${score} / ${total}`;
    document.getElementById('r-grade').textContent=grade;
    const m=Math.floor(timerSec/60),s=timerSec%60;
    document.getElementById('r-time').textContent=`â± ç”¨æ™‚ ${m} åˆ† ${s} ç§’`;
    let html=`<div class="r-item"><div class="r-lbl">ç¸½é¡Œæ•¸</div><div class="r-val">${total}</div></div>
        <div class="r-item"><div class="r-lbl">ç­”å°</div><div class="r-val" style="color:var(--mint)">${score}</div></div>
        <div class="r-item"><div class="r-lbl">ç­”éŒ¯</div><div class="r-val" style="color:var(--rose)">${total-score}</div></div>`;
    Object.entries(catSt).sort((a,b)=>b[1].t-a[1].t).forEach(([cat,s])=>{
        const cp=s.t?Math.round(s.c/s.t*100):0;
        html+=`<div class="r-item"><div class="r-lbl">${cat}</div><div class="r-val">${cp}% <small>(${s.c}/${s.t})</small></div></div>`;
    });
    document.getElementById('r-grid').innerHTML=html;
    if(wrongs.length){let rh=`<h3>éŒ¯é¡Œå›é¡§ï¼ˆå…± ${wrongs.length} é¡Œï¼‰</h3>`;
        wrongs.forEach((w,i)=>{rh+=`<div class="wi"><div class="wi-q">${i+1}. ${w.q}</div><div class="wi-y">âœ— ä½ çš„ç­”æ¡ˆï¼š${w.y}</div><div class="wi-c">âœ“ æ­£ç¢ºç­”æ¡ˆï¼š${w.a}</div></div>`;});
        document.getElementById('wr').innerHTML=rh;}
    show('scr-result');
}
function toggleReview(){const el=document.getElementById('wr');el.style.display=el.style.display==='none'?'block':'none';if(el.style.display==='block')el.scrollIntoView({behavior:'smooth'});}
</script>
</body>
</html>